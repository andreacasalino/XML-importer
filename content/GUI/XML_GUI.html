<!doctype html>
<html>
<head>
  <title>XML GUI</title>

  <script type="text/javascript" src="vis-4.21.0/dist/vis.js"></script>
  <link href="vis-4.21.0/dist/vis-network.min.css" rel="stylesheet" type="text/css" />

  <style type="text/css">
    #mynetwork {
      width:  950px;
      height: 800px;
	  border: 1px solid #444444;
      background-color: #C9E7DA;
    }
	
	#mex_area {
      border: 1px solid lightgray;
    }
  </style>

Location to import: <div id="mex_area"></div>
<button id="mex_button" type="button">Import</button>
	
<div id="mynetwork"></div>
	
</head>

<body>


<script type="text/javascript">
	var mex_button = document.getElementById('mex_button');
	var mex_area = document.getElementById('mex_area');
	mex_area.contentEditable = "true";
	
	var network = null;
	
	function destroy() {
		if (network !== null) {
			network.destroy();
			network = null;
		}
	}
	
	get_Response = function(request_message){
		let xhr = new XMLHttpRequest();
		var last_JSON_arrived;
		xhr.open('GET', 'http://localhost:8080', false);
		xhr.setRequestHeader('Accept', request_message);
		
		xhr.send();
		return xhr.response;
	}

	mex_button.onclick = function() {
          destroy();
		  
		  var path = mex_area.textContent;
		  
		  //send new XML to parse
		  var nodes = get_Response('X_' + path);
		  if(nodes === "null"){		  
				return;
		  }
		  var edges = get_Response('');
		  
		  var container = document.getElementById('mynetwork');
		  var data = {
			nodes: JSON.parse(nodes),
			edges: JSON.parse(edges)
		  };
		  var options = {
                layout: {
                    hierarchical: {
                        direction: "UD"
                    }
                },
				nodes: {font: {color: '#ffffff'}}
            };
			
		  var network = new vis.Network(container, data, options);
	}
	
	window.onbeforeunload = function () {
		get_Response('close'); //closure command to server
	};
	
</script>


</body>
</html>
